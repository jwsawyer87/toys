#! /usr/bin/python -u

import re
import sys
import math
import datetime

assert not sys.stdin.isatty(), "stdin must be redirected"

verbose = "--verbose" in sys.argv

"""
  Match for seconds or milliseconds (as an integer)
"""
regexp = re.compile("^(|.*\D)((\d{10}|\d{13})(\.\d+)?)([^0-9.].*|)$")

for line in sys.stdin:
  line = line.strip('\n')
  while True:
    match = regexp.search(line)
    if not match:
      break
    groups = match.groups()
    if verbose:
      sys.stderr.write("matched on %s\n" % groups[1])
    secs = float(groups[1])
    if int(math.log10(secs)+1) == 13:
      """
        If milliseconds have been expressed as an integer, convert it to seconds
      """
      secs /= 1000.0
    line = groups[0] + str(datetime.datetime.fromtimestamp(secs)) + groups[-1]

  print line
